<div class="container">
  <div class="row">
    <div class="col">
      <div *ngIf="!loggedIn()" ngbDropdown class="d-inline-block" autoClose="outside">
        <button class="btn btn-outline-primary" id="loginForm" ngbDropdownToggle>{{buttonText}}</button>
        <div id="loginDropdown" ngbDropdownMenu aria-labelledby="loginForm">
          <form #LoginForm="ngForm" class="px-4 py-3">
            <div *ngIf="!registering" >
              <div class="form-group">
                <label for="dropdownFormUsername">Username</label>
                <input type="username" class="form-control" id="dropdownFormUsername" name="username" ngModel>
              </div>
              <div class="form-group">
                <label for="dropdownFormPassword">Password</label>
                <input type="password" class="form-control" id="dropdownFormPassword" name="password" ngModel>
              </div>
              <button class="btn btn-primary" (click)="login(LoginForm)">Sign in</button>
              <div class="dropdown-divider"></div>
              <button ngbDropdownItem (click)="registering = true; buttonText = 'Register'">New around here? Sign up</button>
              <!-- <button ngbDropdownItem>Forgot password?</button> -->
            </div>

            <div *ngIf="registering">
                <div class="form-group">
                    <label for="dropdownFormUsername">Username</label>
                    <input type="username" class="form-control" id="dropdownFormUsername" name="username" ngModel>
                  </div>
                  <div class="form-group">
                    <label for="dropdownFormPassword">Password</label>
                    <input type="password" class="form-control" id="dropdownFormPassword" name="password" ngModel>
                  </div>
                  <div class="form-group">
                    <label for="dropdownFormEmail">Email</label>
                    <input type="email" class="form-control" id="dropdownFormEmail" name="email" ngModel>
                  </div>
                  <div class="form-group">
                    <label for="dropdownFormPhone">Phone Number</label>
                    <input type="text" class="form-control" id="dropdownFormPhone" name="phoneNumber" ngModel>
                  </div>
                  <div class="dropdown-divider"></div>
                  <button  class="btn btn-primary btn-sm" (click)="register(LoginForm);">Save/Register</button>
                  <button  class="btn btn-secondary btn-sm" (click)="registering = false; buttonText = 'Login'">Cancel</button>
            </div>
          </form>
        </div>
        </div>
        <div *ngIf="loggedIn()">
            <div ngbDropdown class="d-inline-block" autoClose="outside">
                <button class="btn btn-outline-primary" id="profileButton" ngbDropdownToggle>{{buttonText}}</button>
                <div id="profileDropdown" ngbDropdownMenu aria-labelledby="profileButton">
                    <button  ngbDropdownItem class="btn btn-primary btn-lg" [routerLink]="'user/' + username">View Profile</button>
                    <div class="dropdown-divider"></div>
                    <a ngbDropdownItem [routerLink]="'user/' + username + '/profile'" routerLinkActive="router-link-active" >Edit Profile</a>
                    <button ngbDropdownItem (click)="logout()">Logout</button>
                    <!-- <button ngbDropdownItem>Forgot password?</button> -->
                </div>
        </div>
      </div>
    </div>
  </div>
